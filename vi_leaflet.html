<html>
<head>

  <meta charset=utf-8 />
  <title>Esri Leaflet Testing Layer Controls</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>


    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.1.3/dist/esri-leaflet.js"
    integrity="sha512-pijLQd2FbV/7+Jwa86Mk3ACxnasfIMzJRrIlVQsuPKPCfUBCDMDUoLiBQRg7dAQY6D1rkmCcR8286hVTn/wlIg=="
    crossorigin=""></script>

<!-- Include Leaflet.heat via rawgit.com
in production you'd be better off hosting this library yourself -->

<script src="https://rawgit.com/Leaflet/Leaflet.heat/gh-pages/dist/leaflet-heat.js"></script>

<!-- Load Heatmap Feature Layer from CDN -->
<script src="https://unpkg.com/esri-leaflet-heatmap@2.0.0"></script>

  <div id="map"></div>
  <style>
    body { margin:0; padding:0; }
    #map { position: absolute; top:0; bottom:0; right:0; left:0; }
  </style>
</head>

<body>

<script>
var map = L.map('map',{center:[18.342966, -64.817346], zoom: 12, Layers: [Topographic, overlays]});
 

L.esri.tiledMapLayer({url: 'https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer', maxZoom: 20}).addTo(map);

var Topographic = L.esri.basemapLayer("Topographic") , streets   = L.esri.basemapLayer('Streets'), Imagery = L.esri.basemapLayer ('Imagery');

	var baseLayers = {
		"Topographic": Topographic
		,"Streets": streets
    ,"Imagery": Imagery
	};

   var FS03 = "https://services8.arcgis.com/kp8l5vAnPTGejwfd/arcgis/rest/services/EHRVI_Public/FeatureServer/0";


   heat = L.esri.Heat.featureLayer({
    url: FS03,
    radius: 30
    //,gradient: {
    //  0.2: '#ffffb2',
    //  0.4: '#fd8d3c',
    //  0.6: '#fd8d3c',
    //  0.8: '#f03b20',
    //  1: '#bd0026'
    //}
  });


  var FS01 = "https://services8.arcgis.com/kp8l5vAnPTGejwfd/arcgis/rest/services/ApplicantsFeaturesService/FeatureServer"; // this is the arcgis online service for the area layers

  Points = L.esri.featureLayer({
    url:  FS01 +'/0',
    simplifyFactor: 0.5,
    precision: 5,
    style: function (feature) {
        return { 
        color: 'blue', 
        fillColor: 'green',
        weight: 2 };
    }
});


Points.bindTooltip(function (evt) {
    return L.Util.template('<b> Applicant: </b> {EHRVI_ID} ',evt.feature.properties);
}); 

  var FS02 = "https://services8.arcgis.com/kp8l5vAnPTGejwfd/arcgis/rest/services/EHRVI_Public/FeatureServer";

  PointsPublic = L.esri.featureLayer({
    url:  FS02 +'/0',
    simplifyFactor: 0.5,
    precision: 5,
    style: function (feature) {
        return { 
        color: 'blue', 
        fillColor: 'green',
        weight: 2 };
    }
});


PointsPublic.bindTooltip(function (evt) {
    return L.Util.template('<b> Applicant: </b> {EHRVI_ID} ',evt.feature.properties);
}); 

  var FS02 = "https://services8.arcgis.com/kp8l5vAnPTGejwfd/arcgis/rest/services/EHRVI_Public/FeatureServer";

ExactPoints = L.esri.featureLayer({
  url:  FS02 +'/0',where: "locator = 'Rooftop'",
  simplifyFactor: 0.5,
  precision: 5,
  style: function (feature) {
      return { 
      color: 'red', 
      fillColor: 'green',
      weight: 2 };
  }
});


ExactPoints.bindTooltip(function (evt) {
  return L.Util.template('<b> Applicant: </b> {EHRVI_ID} ',evt.feature.properties);
}); 

  var overlays = {
    "Points Secure": Points
    ,"Points Public": PointsPublic
    ,"Exact Locations":ExactPoints
    ,"Point Heat Map": heat
  };

	L.control.layers(baseLayers, overlays).addTo(map);
</script>

</body>
</html>
